# Oauth

인증(Authentication)과 인가(Authorization)을 획득하는 것

인증은 너누구니?

인가는 내가 무엇을할수있는지 권한을 부여하는것


참고사항 ) 요즘은 비밀번호없애는추세

passwordless 이며 , SNS와 연동해서 정보를받는? 그런느낌 

[레퍼런스 : 비밀번호 없는 웹서비스](https://medium.com/@idchoi2/%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%97%86%EB%8A%94-%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4-passwordless-c25fb859b601)



### Access Token

액세스 토큰은 인증이 완료된 고객에게 내려주는 토큰으로 , 이토큰으로 고객의 정보를 요청할수있다.


액세스토큰만 있다면 네이버? 를통해서 정보를 받을수 있는데 이때 사용하는게 Oauth 이다.

(오오쓰) 라고 읽는다.


로그인팝업으로 액세스 토큰을 받았다

근데 서버에 액세스토큰이없다.

크게 두가지망법

1. 직접 입력

휴대폰인증

    1. 이름과 휴대번호로 본인 인증서비스에 요청

    2. 본인 서비스에서 번호  이름이 유효한지 확인하고 SMS 문자로 토큰을 내려준다

    3. 서비스는 해당토큰을 알수없으니까 임의의 메시지 입력페이지에 Access Token을 넣고

    4. 이과정에서 Access Token이 조작될수있고, 본인인증 서비스에 액세스 토큰을 보내 유효한지 확인하고 인증이 끝나게 된다.


2. Redirect

페이지를 강제로 특정 URL로 이동시킨다.

즉 (특정페이지로 보내버린다 = 토큰을 줄수있다.)

그래서 생각해보면

가끔 빈페이지? 뭔가 URL 이 바뀌면서 넘어간거같은적이 있지않은가??

그때 리다이렉트가 되면서 분명 서버에서 유저에게 토큰을 주는 행위가 일어났을것이다.


URL에 (리다이렉트를 하므로) 정보가 담겨져 있다면

쉽게 탈취당할수 있으므로 대부분 Oauth 서비스 등록절차를 반드시 거치게 되어있다.

즉

서비스제공자와 우리서비스간의 리다이렉트 값에대해 합의를보고 다를경우 리다이렉트 시키지 않게되는것이다.


확실히 내용이 어렵다.


유저(브라우저) - 서비스(우리) - 네이버(비슷한것..)


3자간의 인증절차인것이다.


---

정리해서 생각해보자.


우리서비스에 가입하려고해? 가입하는 UI를 보여준다.


1. 네이버,카카오등 연결을통해 회원가입(sign up 하기)

2. 누르면 (이제 네이버,카카오측에서 제공하는 창을 열어주고 사용자는 거기에 로그인을 한다 = 상시로그인 되어있는경우 바로 연동하기? 가 뜨겟지)

3. 사용자가 거기서 로그인하거나,인증을 완료하면 네이버와 이미 합의본 리다이렉트로 리다이렉트 시킨다. 


> 리다이렉트 : 액세스토큰을 쥐어준다는느낌으로 이해하자. (너 가져)


이때 두가지 방법이있다.

네이버에서 우리 서비스의 서버로 직접 전달하는경우와

리다이렉트시키면서 URL에 정보를 담아서 넘기는경우 ( 매게체로 사용자(브라우저)를 이용한다는 느낌?)

사실 이게 맞는지 살짝 걱정된다.

하루이틀 지나고 정리하는거라 좀 걱정스럽지만.

크게 Oauth 가 뭐냐고 질문받았을때 무엇이라 대답할수있는가 ?


서드파티앱 : 공식유통이아닌 누구든 만들수 있는 앱으로 

프로그래밍에서의 서드파티란 프로그래밍을 도와주는 플러그인이나 라이브러리등을 반드는 회사를 말한다.

즉 내가 웹서비스를 만들려고하는데 거기에 쓰이는 많은 라이브러리,플러그인 등등이라고생각하면되나? ... 다른 말로는

너,나 가있다면 나머지는 다 써드파티 인것이다.

웹에서의 너 나 / 웹서비스 그리고 사용자(클라이언트)

나머지는 서드파티?


다시 처음으로가보자 질문을 받으면 무엇이라 대답할수 있는가?

서드파티앱을 통해서 인증과 인가를 획득하는것이다.

인증은 뭐고 인가는뭔데??

인증은 너누구니? 하는거고

인가는 권한을 부여? 확인 하는것입니다.


예를들어서) 페이스북의ㅣ OAuth를 통해서 ID PASSWORD 를 통해 인증하고 ID가 로그인을 통해서 접근할수있는 데이터들을 가져옵니다.


이거 쉽게생각하면 새로 계정만들때 SNS연동? 나오는거 전부다 OAuth아닌가?



---

